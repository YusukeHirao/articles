---
title: 2023年4月のアップデート
---

## 更新内容

### [Use `v` flag instead of `u` for `pattern` RegExps](https://github.com/whatwg/html/pull/7908)

- `pattern`の正規表現に`u`フラグの代わりに`v`フラグを使用するよう変更されました。
- この変更により、`pattern`属性の値に [RegExp セット表記構文と文字列のプロパティ](https://github.com/tc39/proposal-regexp-v-flag) を使うことができるようになります。
- `v`フラグの違いについては、プロポーザルのドキュメントを参照してください。
- いくつかの以前は不正なパターンは正しくなり、一部の以前は正当なパターンがエラーになるように変更されました。
- この変更により、いくつかの値/パターンの組み合わせが以前は `inputElement.validity.valid === false` だったものが、今では `inputElement.validity.valid === true` となる可能性があります。
- この変更は比較的小さな互換性のリスクを持ちながらも、強力な新機能をもたらすために行われています。
- この変更に関するコンテキストとして、`pattern`属性のために最初に `u`フラグをデフォルトで有効にすることについて討論が行われました。
- この変更に関しては、少なくとも2つの実装者が賛成していることと、互換性に関する問題がないことが確認されました。

### [Fix a typo regarding formStateRestoreCallback](https://github.com/whatwg/html/pull/9130)

- formStateRestoreCallbackのタイポを修正しました。
- Fixes #9114。
  カテゴリー: HTML要素

### [Reset the popover invoker in show popover](https://github.com/whatwg/html/pull/9186)

- show popover時にpopover invokerをリセットする必要がある。それによって、閉じられたpopoverがまだinvokerを持つ状態になる可能性がある問題を修正した。

カテゴリー: HTML要素

### [Use dialog initial focus for dialog popovers](https://github.com/whatwg/html/pull/9121)

- Dialog要素がpopover属性を持つ場合、ポップオーバーとして開かれる場合は、popoverの初期フォーカスアルゴリズムではなく、dialogの初期フォーカスアルゴリズムを使用するように変更されました。
- 実装者2名が賛成し、反対はありません。
- テストが作成され、レビューができるようになりました。
- ChromiumとWebKitはバグレポートが作成されました。

カテゴリー: HTML要素

### [Add "user attention" definition to top-level traversable.](https://github.com/whatwg/html/pull/8466)

- "user attention" の定義を上位レベルのトラバーサブルに追加しました。
- これにより、他の仕様で要求されている概念を提供することができます。
- 2つ以上の実装者が関心を示しており、反対意見はありません。
- これにより、メディアキャプチャメインの仕様で影響を与えることができます。

カテゴリー: HTML要素

### [Meta: export Window's navigable](https://github.com/whatwg/html/pull/9229)

- Windowのnavigableがexportされるように修正されました。
- 修正により、Windowのnavigableがウェブページ上で使用可能になります。
- この変更により、Windowオブジェクトのnavigableプロパティを使用して、ウェブページのナビゲーションに関連する機能を実装することができます。

カテゴリー: Web API

### [Fix "active frame element" definition](https://github.com/whatwg/html/pull/9139)

- 「active frame element」の定義を修正するために、非nullのブラウジングコンテキストのチェックを追加しました。また、「in a document」の代わりに「in a document tree」を使用するように更新しました。
- PRチェックリストは省略しますが、これは基本的なバグ修正です。厳密には「in a document tree」を使用するためのテストが必要ですが、それについてはPRを遅らせたくありません。ただし、「frame」ではなく「iframe」に関することです。（これは古くてみにくい「frame」に関するものです。）ここで「frame」がシャドウツリー内で動作することの確認ができます: https://software.hixie.ch/utilities/js/live-dom-viewer/?saved=11512

### [Prefetch: Specify "appropriate times to fetch and process"](https://github.com/whatwg/html/pull/9223)

- 適切なタイミングでの取得と処理を指定するためのプリフェッチについての変更が行われました。
- プリフェッチの実装に関心を持つ者が最低2人おり、反対意見はありません。
- テストは準備され、レビューおよびコメントを受け付けることができます。
- MDNの関連する問題が報告されました。

カテゴリー: Fetch API

### [Add a performance entry type for visibility state changes](https://github.com/whatwg/html/pull/8206)

- パフォーマンスエントリタイプを追加する。これにより、可視性の変更があった場合にエントリが追加され、ドキュメントがアクティブになったときに初期エントリが追加される。
- 具体的な実装状況やバグレポートは除外する。

### [Make script's "base URL" member nullable, as the spec expects](https://github.com/whatwg/html/pull/9209)

- スクリプトの「ベースURL」メンバーをnull可能にするための変更が行われました。
- 多くの場所で、https://html.spec.whatwg.org/#concept-script-base-urlをnull可能であると予想しています。
- しかし、現在のメンバーはnullではなく、常にURL構造体であるため、nullが設定できません。
- この変更は、メンバーをnullまたは「ベース」URLにするだけの変更です。

カテゴリー: HTML要素

### [Fix map definition in topmost popover ancestor](https://github.com/whatwg/html/pull/9190)

- ポップオーバーの祖先であるマップの定義を修正しました。
- マップの参照がデータ構造ではなくマップ要素を指していたため、修正しました。
- カテゴリー: HTML要素

### [Editorial: Export the browsing context's top-level traversable.](https://github.com/whatwg/html/pull/9185)

- ブラウジングコンテキストのトップレベルトラバーサブルを他の仕様からエクスポートするために、@wanderviewが要請しています。
- エディトリアル（覚書）の内容は、@wanderviewが他の仕様からこの機能を使用したいというものです。

カテゴリー: Web API

### [Remove anchor attribute reference in popover note](https://github.com/whatwg/html/pull/9141)

- Popoverノート内のanchor属性の参照を削除しました。
- カテゴリー: HTML要素

### [Export dfn "CORS settings attribute credentials mode".](https://github.com/whatwg/html/pull/9204)

- "CORS settings attribute credentials mode" のdfnをエクスポートします。
- これはw3c/manifest#1069で使用され、ドキュメントなしでマニフェストを取得する際にユーザーエージェントがこれを正しく設定することを推奨するためです。
- This will be used by w3c/manifest#1069 to recommend that user agents set this correctly when fetching the manifest without a document.

カテゴリー: Web API

### [Link processing: Update call to Manifest processing algorithm (interface changed)](https://github.com/whatwg/html/pull/8754)

- マニフェストの処理アルゴリズムの呼び出しに関する変更が行われました。これは、"処理中のマニフェスト"アルゴリズムのインターフェースをLink要素とResponse要素ではなく、ドキュメントURLとマニフェストURLを受け取る形に変更するものです。
- この変更により、既存の動作が正確に保持されるようになっています。ただし、いくつかの新しいステップが追加されている点に注意してください。これらのステップは、マニフェスト仕様のw3c/manifest#1069で削除され、より柔軟なインターフェースが提供されるようになったものです。既存の動作を保持し、正しいデータでマニフェストアルゴリズムを呼び出すために、これらのステップをHTMLに追加しました。

カテゴリー: HTML要素

### [Fix var/ref name mismatch with s/intendToStoreInBfcache/intendToKeepInBfcache/](https://github.com/whatwg/html/pull/9170)

- `intendToStoreInBfcache`は使用されていませんが、`intendToKeepInBfcache`は使用されています。後者を選択しました。ここでの中心は、何かを有効なままに保つことのようです。

カテゴリー: プログラミング

### [[meta] Mark seven definitions as exported](https://github.com/whatwg/html/pull/9163)

- 7つの定義をエクスポート済みとしてマーク
- フォーマットの示す通りに要約
- プレビューやWattsiに関連する部分を除外
- Chromium/Gecko/WebKitの実装状況やバグレポートを除外
- カテゴリーはHTML要素に関するもの

### [Report fallback resource timing for no-TAO iframes](https://github.com/whatwg/html/pull/8643)

- no-TAOのクロスオリジンなiframeにおいて、fetch start/endのタイミングを自動的に報告しないようにします
- 代わりに、ユーザーのiframeとのやり取りを明らかにしないように、navigation start timeとiframeのload event timeであるフォールバックリソースタイミングを報告します
- テストが準備されており、ChromiumとWebKitが興味を持っていることが確認されています
- 実装のバグレポートが提出されています
- MDNの関連する問題が提出されています

カテゴリー: Fetch API

### [Rename :open to :popover-open and remove :closed](https://github.com/whatwg/html/pull/9077)

- :openを:popover-openに変更し、:closedを削除する。
- Chromium、Gecko、WebKitに実装があり、問題がない。
- テストは書かれ、レビューが可能。
- MDNにも関連する問題が報告されている。
  カテゴリー: CSS

---

解説に間違いがあれば [@cloud10designs](https://twitter.com/cloud10designs) までご連絡ください。
